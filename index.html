<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Clashle - Clash Royale Wordle</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #1e1e1e;
        color: white;
        text-align: center;
        margin: 0;
        padding: 0;
    }

    h1 {
        font-size: 40px;
        margin-top: 20px;
    }

    #board {
        display: grid;
        grid-template-columns: repeat(5, 60px);
        grid-gap: 10px;
        justify-content: center;
        margin-top: 30px;
    }

    .tile {
        width: 60px;
        height: 60px;
        border: 2px solid #555;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        font-weight: bold;
        text-transform: uppercase;
        background-color: #2c2c2c;
    }

    .correct { background-color: #12c923 !important; }
    .present { background-color: #e3d312 !important; }
    .absent { background-color: #4a4a4a !important; }

    /* Keyboard */
    #keyboard {
        margin-top: 20px;
    }
    .key-row {
        display: flex;
        justify-content: center;
        margin: 5px 0;
    }
    .key {
        padding: 15px 12px;
        margin: 3px;
        background: #333;
        border-radius: 6px;
        cursor: pointer;
        user-select: none;
        font-size: 18px;
    }
    .key:active {
        transform: scale(1.1);
    }

    /* Hint GUI */
    #hintBox {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 300px;
        background: #222;
        padding: 20px;
        border-radius: 10px;
        border: 2px solid #e3d312;
        display: none;
    }
    #hintBox h2 { margin-top: 0; }
    #closeHint {
        margin-top: 10px;
        padding: 10px 20px;
        background: #e33;
        cursor: pointer;
        border-radius: 6px;
    }

    #hintBtn {
        margin-top: 25px;
        padding: 12px 20px;
        background: #e3d312;
        color: black;
        cursor: pointer;
        border-radius: 10px;
        font-size: 18px;
        font-weight: bold;
    }

    #credits {
        margin-top: 40px;
        font-size: 14px;
        opacity: 0.7;
    }
</style>
</head>
<body>

<h1>CLASHLE</h1>
<p>This is a Clash Royale Wordle. Guess the character!</p>

<div id="board"></div>

<div id="keyboard"></div>

<button id="hintBtn">HINT</button>

<div id="hintBox">
    <h2>Hint</h2>
    <p id="hintText"></p>
    <div id="closeHint">Close</div>
</div>

<p id="credits">CREDITS / OWNER: ollie / neocoder17</p>

<script>
/* ─────────────────────────────────────────────
   ALL CLASH ROYALE CARDS + HINTS
────────────────────────────────────────────── */
const cards = [
    { name: "knight", hint: "A tanky melee troop with good single-target damage." },
    { name: "archer", hint: "Ranged attackers that shoot arrows from a distance." },
    { name: "wizard", hint: "Deals high splash damage with fireballs." },
    { name: "pekka", hint: "Very high damage melee unit with massive health." },
    { name: "hog", hint: "Fast unit that targets buildings only." },
    { name: "zap", hint: "Stuns enemies briefly and deals instant damage." },
    { name: "arrows", hint: "Covers a large area with arrow damage." },
    { name: "miner", hint: "Burrows underground and appears anywhere on arena." },
    { name: "golem", hint: "Huge tank that splits into golemites on death." },
    { name: "princess", hint: "Very long-range archer with splash damage." },
    { name: "valkyrie", hint: "Swings an axe in a circle, great for swarms." },
];

/* Random card */
let target = cards[Math.floor(Math.random() * cards.length)];
console.log("Clashle Target:", target.name);

/* Wordle settings */
const maxGuesses = 6;
let currentRow = 0;
let currentCol = 0;
const wordLength = target.name.length;

const board = document.getElementById("board");
const keyboard = document.getElementById("keyboard");

/* ─────────────────────────────────────────────
   BUILD BOARD
────────────────────────────────────────────── */
function buildBoard() {
    board.innerHTML = "";
    for (let r = 0; r < maxGuesses; r++) {
        for (let c = 0; c < wordLength; c++) {
            const tile = document.createElement("div");
            tile.className = "tile";
            tile.id = `tile-${r}-${c}`;
            board.appendChild(tile);
        }
    }
}
buildBoard();

/* ─────────────────────────────────────────────
   BUILD KEYBOARD
────────────────────────────────────────────── */
const rows = [
    ["q","w","e","r","t","y","u","i","o","p"],
    ["a","s","d","f","g","h","j","k","l"],
    ["enter","z","x","c","v","b","n","m","del"]
];

rows.forEach(r => {
    let rowDiv = document.createElement("div");
    rowDiv.className = "key-row";
    r.forEach(key => {
        let k = document.createElement("div");
        k.className = "key";
        k.textContent = key.toUpperCase();
        k.onclick = () => handleKey(key);
        rowDiv.appendChild(k);
    });
    keyboard.appendChild(rowDiv);
});

/* ─────────────────────────────────────────────
   INPUT HANDLING
────────────────────────────────────────────── */
document.addEventListener("keydown", (e) => {
    let key = e.key.toLowerCase();
    handleKey(key);
});

function handleKey(key) {
    if (key === "enter") submitGuess();
    else if (key === "del" || key === "backspace") deleteLetter();
    else if (/^[a-z]$/.test(key)) addLetter(key);
}

function addLetter(letter) {
    if (currentCol >= wordLength) return;
    let tile = document.getElementById(`tile-${currentRow}-${currentCol}`);
    tile.textContent = letter;
    currentCol++;
}

function deleteLetter() {
    if (currentCol === 0) return;
    currentCol--;
    let tile = document.getElementById(`tile-${currentRow}-${currentCol}`);
    tile.textContent = "";
}

/* ─────────────────────────────────────────────
   SUBMIT GUESS
────────────────────────────────────────────── */
function submitGuess() {
    if (currentCol < wordLength) return;

    let guess = "";
    for (let c = 0; c < wordLength; c++) {
        guess += document.getElementById(`tile-${currentRow}-${c}`).textContent;
    }

    checkGuess(guess.toLowerCase());
}

function checkGuess(guess) {
    for (let c = 0; c < wordLength; c++) {
        let tile = document.getElementById(`tile-${currentRow}-${c}`);
        if (guess[c] === target.name[c]) {
            tile.classList.add("correct");
        } else if (target.name.includes(guess[c])) {
            tile.classList.add("present");
        } else {
            tile.classList.add("absent");
        }
    }

    if (guess === target.name) {
        alert("Correct! It was " + target.name.toUpperCase());
        setTimeout(newGame, 400);
        return;
    }

    currentRow++;
    currentCol = 0;

    if (currentRow >= maxGuesses) {
        alert("Out of tries! The answer was " + target.name.toUpperCase());
        setTimeout(newGame, 400);
    }
}

/* ─────────────────────────────────────────────
   NEW GAME
────────────────────────────────────────────── */
function newGame() {
    target = cards[Math.floor(Math.random() * cards.length)];
    console.log("New Clashle Target:", target.name);
    currentRow = 0;
    currentCol = 0;
    buildBoard();
}

/* ─────────────────────────────────────────────
   HINT BUTTON
────────────────────────────────────────────── */
document.getElementById("hintBtn").onclick = () => {
    document.getElementById("hintText").textContent = target.hint;
    document.getElementById("hintBox").style.display = "block";
};

document.getElementById("closeHint").onclick = () => {
    document.getElementById("hintBox").style.display = "none";
};
</script>

</body>
</html>
